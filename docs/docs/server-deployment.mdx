---
title: Server Deployment
sidebar_position: 5
---

import Tabs from '@theme/Tabs';
import TabItem from '@theme/TabItem';
import Admonition from '@theme/Admonition';

# 🚀 Server Deployment (Direct Install)

Archon’s simplified build runs directly on macOS, Windows, and Linux without Docker. This guide walks through configuring Supabase, starting the FastAPI server, and keeping everything running reliably.

## 📦 Project Structure (Simplified)

```text
archon/
├── python/                # FastAPI backend (uv + Poetry-style layout)
│   ├── src/server         # API, services, and Socket.IO
│   └── uv.lock            # Python dependencies (managed by uv)
├── archon-ui-main/        # React + Vite frontend
├── migration/             # SQL scripts for Supabase
├── docs/                  # Documentation site (optional)
└── .env                   # Environment configuration
```

Legacy MCP and container files remain for teams that need them, but they are not required for the default workflow.

## 🧰 Requirements

- Python 3.12 (with [uv](https://docs.astral.sh/uv/) installed)
- Node.js 18+
- Git
- Supabase project (cloud) or Supabase CLI for local Postgres
- API key for OpenAI, Google Gemini, or Anthropic Claude

## ⚙️ Configure Supabase

<Tabs>
<TabItem value="cloud" label="Supabase Cloud">

1. Create a project at [supabase.com](https://supabase.com).
2. Open **Project Settings → API**.
3. Copy the `Project URL` and `service_role` key into `.env`.
4. Run `migration/complete_setup.sql` in the SQL editor.

</TabItem>
<TabItem value="local" label="Supabase CLI">

```bash
supabase init        # first time only
supabase start       # launches Postgres + Studio locally
```

Copy the printed API URL and service role key into `.env`, then run the SQL migrations using the local Studio interface.

</TabItem>
</Tabs>

## 🔐 Environment File

```bash
cp .env.example .env
# edit the following values
SUPABASE_URL=...
SUPABASE_SERVICE_KEY=...
ARCHON_SERVER_PORT=8181   # optional override
ARCHON_UI_PORT=3737       # optional override
```

Provider API keys are added later through the UI and stored encrypted in Supabase.

## ▶️ Start the Services

```bash
# Terminal 1 - FastAPI backend
cd python
uv sync                 # once
uv run python -m src.server.main

# Terminal 2 - React UI
cd archon-ui-main
npm install             # once
npm run dev -- --host 0.0.0.0 --port 3737
```

Open [http://localhost:3737](http://localhost:3737) to complete onboarding. Paste an API key for the provider you want to use first (OpenAI, Google Gemini, or Anthropic Claude).

## 🔄 Keeping Services Running

For long-lived sessions, wrap the commands above in your favorite process manager:

- **macOS/Linux**: `systemd`, `pm2`, `supervisord`, or `forever`
- **Windows**: PowerShell background jobs or [NSSM](https://nssm.cc)

Example `systemd` service snippet:

```ini
[Service]
WorkingDirectory=/opt/archon/python
ExecStart=/usr/bin/env uv run python -m src.server.main
Restart=on-failure
Environment=SUPABASE_URL=...
Environment=SUPABASE_SERVICE_KEY=...
```

## 🧪 Health & Monitoring

- `curl http://127.0.0.1:8181/api/projects/health`
- `curl http://127.0.0.1:8181/api/database/metrics`
- Supabase dashboard → **Reports** for database usage
- UI toast notifications warn when the backend disconnects

## 🧰 Provider Credentials

Use **Settings → API Keys** in the UI to paste provider keys. The backend encrypts them before storage. Changing providers updates default models automatically; embeddings fall back to OpenAI when Claude is selected without an embedding provider.

## 🏗️ Deploying on Another Machine

1. Clone the repository and copy `.env`.
2. Set `HOST` in `.env` to the machine’s LAN IP or domain.
3. Restart the FastAPI server and UI dev server.
4. Access the UI from another device via `http://HOST:ARCHON_UI_PORT`.

## 🧭 Legacy Docker & MCP

<Admonition type="info" title="Looking for Docker?">
The previous Docker Compose + MCP deployment lives in `docker-compose.yml` and related Dockerfiles. These instructions are now legacy; use them only if you need container orchestration or MCP integrations. Otherwise, stick with the direct-install flow above.
</Admonition>
